<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>הסניף הדיגיטלי</title>
<style>
:root {
  --fg: #f7f7f2;
  --glass: rgba(0, 0, 0, .55);
  --glass-brd: rgba(255, 255, 255, .08);
  --accent: #22d3ee;
  --btn: #2b7bff;
}
body {
  font-family: 'Heebo', system-ui;
  background: url('background.png') center/cover no-repeat fixed;
  color: var(--fg);
  margin: 0;
  text-align: center;
}
.overlay {
  width: min(640px, 94%);
  margin: 110px auto 20px;
  padding: 18px 14px 20px;
  background: var(--glass);
  border: 1px solid var(--glass-brd);
  border-radius: 18px;
  box-shadow: 0 0 20px rgba(0, 0, 0, .4);
}
h1 {
  margin: 6px 0 8px;
  font-size: 1.95rem;
  line-height: 1.1;
}
.section {
  background: rgba(0, 0, 0, .53);
  border: 1px solid var(--glass-brd);
  border-radius: 12px;
  padding: 12px;
  margin: 12px auto 0;
  text-align: right;
}
a {
  color: var(--accent);
  font-weight: 600;
  text-decoration: underline;
}
.club-code {
  font-size: 1.9rem;
  font-weight: 800;
}
.copy-btn {
  background: var(--btn);
  color: #fff;
  border: none;
  border-radius: 6px;
  padding: 6px 10px;
  cursor: pointer;
}
.copy-btn:hover {
  background: #1b63e8;
}
.store-links {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-top: 6px;
}
.store-links a {
  background: rgba(255, 255, 255, .1);
  padding: 4px 6px;
  border-radius: 8px;
  transition: .2s;
  display: flex;
  align-items: center;
  gap: 6px;
}
.store-links a:hover {
  transform: scale(1.05);
  background: rgba(255, 255, 255, .18);
}
.store-icon {
  width: 65px;
  opacity: .95;
}
.whatsapp-link {
  margin-top: 12px;
  font-weight: 700;
  font-size: 1rem;
}
.whatsapp-link a {
  color: #25D366;
  text-decoration: none;
  font-weight: 700;
  border: 1px solid #25D366;
  padding: 8px 12px;
  border-radius: 14px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  transition: background-color 0.3s, color 0.3s;
}
.whatsapp-link a:hover {
  background: #25D366;
  color: #fff;
}
.whatsapp-icon {
  width: 24px;
  height: 24px;
  filter: none;
}
.tiny-note {
  font-size: .86em;
  opacity: .92;
  margin-top: 6px;
  text-align: center;
}
footer {
  margin-top: 14px;
  font-weight: 700;
  font-size: 1.05rem;
  color: #ffdf91;
}
.footer-sub {
  font-weight: 500;
  font-size: .83rem;
  color: #ffe9b6;
  margin-top: 6px;
}
.modal {
  position: fixed;
  inset: 0;
  z-index: 9998;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  background: rgba(0, 0, 0, 0);
  transition: opacity .25s ease, visibility .25s ease, background .25s ease;
}
.modal.show {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  background: rgba(0, 0, 0, .55);
}
.modal-box {
  background: rgba(1, 59, 51, .96);
  border: 1px solid rgba(255, 255, 255, .15);
  width: min(420px, 92%);
  color: #fff;
  text-align: right;
  padding: 18px;
  border-radius: 14px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, .35);
}
.modal-box h3 {
  margin: 0 0 12px;
  color: #ffdf91;
  font-size: 1.2rem;
}
.modal-actions {
  margin-top: 12px;
  display: flex;
  justify-content: flex-start;
  gap: 8px;
}
.btn {
  border: none;
  border-radius: 8px;
  padding: 8px 14px;
  cursor: pointer;
  color: #fff;
  background: var(--btn);
}
.btn:hover {
  background: #1b63e8;
}
.btn-ghost {
  background: transparent;
  border: 1px solid rgba(255, 255, 255, .3);
}
.btn-ghost:hover {
  background: rgba(255, 255, 255, .1);
}
.field {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin: 10px 0;
}
.label {
  font-size: .95rem;
  opacity: .95;
}
.input {
  background: rgba(255, 255, 255, .1);
  border: 1px solid rgba(255, 255, 255, .25);
  color: #fff;
  border-radius: 10px;
  padding: 10px;
  font-size: 1rem;
  outline: none;
}
.input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(34, 211, 238, .25);
}
.select {
  background: rgba(255, 255, 255, .1);
  border: 1px solid rgba(255, 255, 255, .25);
  color: #fff;
  border-radius: 10px;
  padding: 10px;
  font-size: 1rem;
}
.hint {
  font-size: .82rem;
  opacity: .9;
}
.error {
  font-size: .86rem;
  color: #ffd1d1;
  display: none;
}
.error.show {
  display: block;
}
</style>
</head>
<body>

<!-- כפתור משמרת -->
<div class="shift-indicator" onclick="openShiftModal()" title="מי במשמרת עכשיו?">
  <img src="shift.png" alt="משמרת">
</div>

<!-- מודאל משמרת -->
<div id="shiftModal" class="modal" aria-hidden="true">
  <div class="modal-box">
    <h3>🕓 מי במשמרת עכשיו?</h3>
    <p id="shiftText">טוען...</p>
    <div class="modal-actions"><button class="btn" onclick="closeShiftModal()">הבנתי</button></div>
  </div>
</div>

<!-- מודאל Bit -->
<div id="bitModal" class="modal" aria-hidden="true">
  <div class="modal-box">
    <h3>bit — תשלום למפעיל</h3>
    <p>הטלפון של מי שבמשמרת כרגע:</p>
    <p id="bitPhone" style="font-size:1.3rem; font-weight:bold; margin-bottom:10px;"></p>
    <div class="modal-actions" style="flex-direction: column; gap: 10px; margin-top: 15px;">
      <button class="btn" id="copyAndOpenBit">📋 העתק מספר ופתח Bit</button>
      <button class="btn" id="closeBitModalBtn">סגור</button>
    </div>
  </div>
</div>

<!-- מודאל אישור Bit -->
<div id="bitConfirmModal" class="modal" aria-hidden="true">
  <div class="modal-box">
    <h3>המספר טלפון הועתק</h3>
    <p>המספר טלפון להעברה הועתק, יש לבצע העברה בBit על ידי "העברה לפי מספר נייד" להדביק את הטלפון, לצלם מסך ולשלוח בWhatsapp של הסניף הדיגיטלי בצירוף הכינוי.</p>
    <div class="modal-actions">
      <button class="btn" id="openBitAppBtn">פתח את אפליקציית Bit</button>
      <button class="btn-ghost" id="closeBitConfirmBtn">סגור</button>
    </div>
  </div>
</div>

<!-- מודאל PayBox -->
<div id="payboxModal" class="modal" aria-hidden="true">
  <div class="modal-box">
    <h3>PayBox — תשלום</h3>
    <p>לאחר התשלום ב PayBox יש לבצע צילום מסך של התשלום ולשלוח אותו בקבוצת הסניף הדיגיטלי בWhatsapp בצירוף הכינוי.</p>
    <div class="modal-actions">
      <button class="btn" onclick="goToPayBox()">המשך לתשלום</button>
      <button class="btn" onclick="closePayboxModal()">ביטול</button>
    </div>
  </div>
</div>

<!-- מודאל משיכות WhatsApp -->
<div id="withdrawWhatsAppModal" class="modal" aria-hidden="true">
  <div class="modal-box">
    <h3>שליחת בקשת משיכה</h3>
    <p>שלח בקבוצת המשיכות הסניף הדיגיטלי כינוי וסכום למשיכה.</p>
    <div class="modal-actions">
      <button class="btn" onclick="openWithdrawWhatsAppGroup()">פתח את קבוצת המשיכות</button>
      <button class="btn-ghost" onclick="closeWithdrawWhatsAppModal()">סגור</button>
    </div>
  </div>
</div>

<!-- מודאל משיכה (טופס ויצירת הודעה מובנית) -->
<div id="withdrawModal" class="modal" aria-hidden="true">
  <div class="modal-box">
    <h3>בקשת משיכה</h3>
    <form id="withdrawForm">
      <div class="field">
        <label class="label" for="wd_withdraw">כמה למשוך? (₪)</label>
        <input class="input" id="wd_withdraw" name="wd_withdraw" type="number" min="1" step="1" inputmode="numeric" placeholder="למשל: 200" required />
      </div>
      <div class="field">
        <label class="label" for="wd_keep">כמה להשאיר? (₪)</label>
        <input class="input" id="wd_keep" name="wd_keep" type="number" min="0" step="1" inputmode="numeric" placeholder="למשל: 0" required />
      </div>
      <div class="field">
        <label class="label" for="wd_nick">כינוי (ClubGG)</label>
        <input class="input" id="wd_nick" name="wd_nick" placeholder="הכנס כינוי ב-ClubGG" autocomplete="off" required />
      </div>
      <div class="modal-actions">
        <button type="submit" class="btn">שלח בקשה</button>
        <button type="button" class="btn-ghost" onclick="closeWithdrawModal()">ביטול</button>
      </div>
    </form>
  </div>
</div>

<div class="overlay">
  <h1>הסניף הדיגיטלי</h1>

  <div class="section">
    <h2>📱 אפליקציה</h2>
    <div class="club-row">
      <span class="club-code-label">קוד מועדון:</span>
      <span class="club-code-badge" id="clubCode">715965</span>
      <button class="copy-btn" onclick="copyText(document.getElementById('clubCode').textContent)">📋 העתק</button>
    </div>
    <div class="store-links">
      <a href="https://apps.apple.com/us/app/clubgg-poker/id1529839330" target="_blank"><img src="app store.png" class="store-icon" alt="App Store"></a>
      <a href="https://play.google.com/store/apps/details?id=com.nsus.clubgg" target="_blank"><img src="android.png" class="store-icon" alt="Google Play"></a>
    </div>
    <div class="whatsapp-link">
      <a href="https://chat.whatsapp.com/GebftOLJuNB8h2w2F8Vxkx?mode=wwc" target="_blank" rel="noopener noreferrer">
        💬 הצטרפו לקבוצת הווצאפ של הסניף הדיגיטלי
      </a>
    </div>
  </div>

  <div class="section topup-section">
    <h2>🔋 טעינות</h2>
    <div class="hint-top">לחץ על אחת האופציות לטעינה</div>
    <div class="tiny-note"><b>שימו ❤️ טעינות מתבצעות כל יום בין 18:00 ל־00:00</b></div>
    <div class="pay-actions">
      <a class="pay-btn" data-type="paybox" href="https://links.payboxapp.com/9kD9tKtOhWb" target="_blank" onclick="openPayboxModal(event)">
        <img src="PayBox.png" class="pay-logo" alt="PayBox"><span class="pay-label">PayBox</span>
      </a>
      <button class="pay-btn" id="bitBtn" data-type="bit">
        <img src="Bit.png" class="pay-logo" alt="bit"><span class="pay-label">bit</span>
      </button>
    </div>
    <div class="tiny-note">בכל טעינה, לשלוח צילום מסך וכינוי.</div>
    <div class="tiny-note"><b>יחס צ׳יפים 1:10</b></div>
  </div>

  <div class="section">
    <h2>💸 משיכות</h2>
    <div class="hours-pill">כל יום שלישי בין <b>18:00</b> ל־<b>00:00</b></div>
    <a id="withdrawLink" href="https://chat.whatsapp.com/GDw1GilqCab6Un2TspiWBP?mode=wwc" target="_blank" class="link-btn">💬 לקבוצת ה-WhatsApp לביצוע משיכות</a>
  </div>

  <footer>
    ⚠️ שחקו באחריות
    <div class="footer-sub">🤝 שמרו על הקהילה שלנו – לא מפרסמים קלאבים או משחקים אחרים.</div>
    <div class="footer-sub">אנחנו כאן כדי ליהנות יחד, באווירה טובה </div>
  </footer>
</div>

<script>
function copyText(t) {
  navigator.clipboard?.writeText(t).catch(() => {});
}

const PHONE_MAOR = "0546819166";
const PHONE_IDO = "0559877777";

function nowIL() {
  const d = new Date();
  const fmt = new Intl.DateTimeFormat('he-IL', {
    timeZone: 'Asia/Jerusalem',
    hour12: false,
    hour: '2-digit',
    minute: '2-digit',
    weekday: 'long'
  }).formatToParts(d);
  const get = t => fmt.find(x => x.type === t)?.value;
  const wd = (get('weekday') || '').trim();
  const mapLong = {
    "יום ראשון": 0,
    "יום שני": 1,
    "יום שלישי": 2,
    "יום רביעי": 3,
    "יום חמישי": 4,
    "יום שישי": 5,
    "שבת": 6,
    "יום שבת": 6
  };
  const day = (wd in mapLong) ? mapLong[wd] : d.getDay();
  const h = +get('hour');
  const m = +get('minute');
  return { day, minutes: h * 60 + m };
}

const STARTER_FOR_EVEN_DAY = 'מאור';
const STARTER_FOR_ODD_DAY = 'עידו';

function currentShiftOwner() {
  const n = nowIL();
  const shiftIndex = Math.floor(n.minutes / 180);
  const dayStarter = (n.day % 2 === 0) ? STARTER_FOR_EVEN_DAY : STARTER_FOR_ODD_DAY;
  const other = (dayStarter === 'מאור') ? 'עידו' : 'מאור';
  return (shiftIndex % 2 === 0) ? dayStarter : other;
}

function openShiftModal() {
  const name = currentShiftOwner();
  document.getElementById('shiftText').textContent = `במשמרת: ${name}`;
  document.getElementById('shiftModal').classList.add('show');
}

function closeShiftModal() {
  document.getElementById('shiftModal').classList.remove('show');
}

function openBitModal() {
  const name = currentShiftOwner();
  const phone = (name === 'מאור') ? PHONE_MAOR : PHONE_IDO;
  document.getElementById('bitPhone').textContent = phone;
  document.getElementById('bitAppOpenBtn').style.display = 'none';
  document.getElementById('bitModal').classList.add('show');
}

function closeBitModal() {
  document.getElementById('bitModal').classList.remove('show');
}

function copyAndOpenBitConfirm() {
  const phone = document.getElementById('bitPhone').textContent;
  navigator.clipboard.writeText(phone).then(() => {
    closeBitModal();
    document.getElementById('bitConfirmModal').classList.add('show');
  });
}

function closeBitConfirmModal() {
  document.getElementById('bitConfirmModal').classList.remove('show');
}

function openBitApp() {
  window.open('bit://', '_blank');
}

function openPayboxModal(event) {
  event.preventDefault();
  document.getElementById('payboxModal').classList.add('show');
}

function closePayboxModal() {
  document.getElementById('payboxModal').classList.remove('show');
}

function goToPayBox() {
  window.open('https://links.payboxapp.com/9kD9tKtOhWb', '_blank');
  closePayboxModal();
}

const withdrawLink = document.getElementById('withdrawLink');
const withdrawWhatsAppModal = document.getElementById('withdrawWhatsAppModal');

function openWithdrawWhatsAppModal(event) {
  event.preventDefault();
  withdrawWhatsAppModal.classList.add('show');
}

function closeWithdrawWhatsAppModal() {
  withdrawWhatsAppModal.classList.remove('show');
}

function openWithdrawWhatsAppGroup() {
  window.open(withdrawLink.href, '_blank');
  closeWithdrawWhatsAppModal();
}

withdrawLink.addEventListener('click', openWithdrawWhatsAppModal);

// כהוספת הפונקציונליות לפעולות כפתורים בתוך המודאלים:
document.addEventListener('DOMContentLoaded', () => {
  document.getElementById('bitBtn').addEventListener('click', openBitModal);
  document.getElementById('copyAndOpenBit').addEventListener('click', copyAndOpenBitConfirm);
  document.getElementById('closeBitModalBtn').addEventListener('click', closeBitModal);
  document.getElementById('closeBitConfirmBtn').addEventListener('click', closeBitConfirmModal);
  document.getElementById('openBitAppBtn').addEventListener('click', openBitApp);

  // ניתן להוסיף כאן את האזנה ללחיצה על כפתור המשיכות לפתיחת המודאל המתאים
});
</script>

</body>
</html>
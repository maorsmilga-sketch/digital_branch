<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>הסניף הדיגיטלי</title>
<style>
  :root {
    --fg: #f7f7f2;
    --glass: rgba(0, 0, 0, .55);
    --glass-brd: rgba(255, 255, 255, .08);
    --accent: #22d3ee;
    --btn: #2b7bff;
  }
  body {
    font-family: 'Heebo', system-ui;
    background: url('background.png') center/cover no-repeat fixed;
    color: var(--fg);
    margin: 0;
    text-align: center;
  }

  .overlay {
    width: min(640px, 94%);
    margin: 110px auto 20px;
    padding: 18px 14px 20px;
    background: var(--glass);
    border: 1px solid var(--glass-brd);
    border-radius: 18px;
    box-shadow: 0 0 20px rgba(0, 0, 0, .4);
  }

  h1 { margin: 6px 0 8px; font-size: 1.95rem; line-height: 1.1; }

  .section {
    background: rgba(0,0,0,.53);
    border: 1px solid var(--glass-brd);
    border-radius: 12px;
    padding: 12px;
    margin: 12px auto 0;
    text-align: right;
  }

  a { color: var(--accent); font-weight: 600; }

  .club-code { font-size: 1.9rem; font-weight: 800; }
  .copy-btn { background-color: var(--btn); color: #fff; border: none; border-radius: 6px; padding: 6px 10px; cursor: pointer; }

  .store-links { display: flex; justify-content: center; gap: 10px; margin-top: 6px; }
  .store-links a { background: rgba(255,255,255,0.1); padding: 4px 6px; border-radius: 8px; }
  .store-icon { width: 65px; opacity: .95; }

  .btn-wa { background: linear-gradient(135deg, #0b7a55, #064e3b); color: #fff; border: none; border-radius: 22px; padding: 9px 14px; font-size: .95rem; cursor: pointer; margin-top: 8px; }

  .tiny-note { font-size: .86em; opacity: .92; margin-top: 6px; }
  .micro-note { font-size: .76em; opacity: .87; margin-top: 4px; }

  footer { margin-top: 14px; font-weight: 700; font-size: 1.05rem; color: #ffdf91; }
  .footer-sub { font-weight: 500; font-size: .83rem; color: #ffe9b6; margin-top: 6px; }

  /* מודלים */
  .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,.6); z-index: 9999; align-items: center; justify-content: center; }
  .modal-box { background: rgba(1,59,51,.96); border: 1px solid rgba(255,255,255,.15); width: min(380px, 92%); color: #fff; text-align: center; padding: 18px; border-radius: 14px; box-shadow: 0 10px 30px rgba(0,0,0,.35); }
  .modal-box h3 { margin: 0 0 8px; color: #ffdf91; font-size: 1.2rem; }
  .modal-box p { margin: 8px 0; line-height: 1.4; }
  .modal-actions { margin-top: 10px; display: flex; justify-content: center; }
  .btn { border: none; border-radius: 8px; padding: 8px 14px; cursor: pointer; color: #fff; background: var(--btn); }
  .btn:hover { background: #1b63e8; }

  .input { width: 85%; padding: 7px; border-radius: 6px; border: 1px solid #ccc; margin: 5px 0; text-align: center; font-size: 1rem; }

</style>
</head>
<body>
  <div class="overlay">
    <h1>הסניף הדיגיטלי</h1>

    <div class="section">
      <h2>אפליקציה</h2>
      <div><b>קוד מועדון:</b> <span class="club-code" id="clubCode">715965</span>
        <button class="copy-btn" onclick="copyText(document.getElementById('clubCode').textContent)">📋 העתק</button>
      </div>
      <div class="store-links">
        <a href="https://apps.apple.com/us/app/clubgg-poker/id1529839330" target="_blank"><img src="app store.png" class="store-icon"></a>
        <a href="https://play.google.com/store/apps/details?id=com.nsus.clubgg" target="_blank"><img src="android.png" class="store-icon"></a>
      </div>
    </div>

    <div class="section">
      <h2>🔋 טעינות</h2>
      <div>🔗 <b>Paybox:</b> <a href="https://links.payboxapp.com/9kD9tKtOhWb" target="_blank">טען עכשיו ב-Paybox</a></div>
      <button class="btn-wa" onclick="startWhatsappFlow()">אין לך PayBox? דבר איתי ב-WhatsApp 💬</button>
      <div class="tiny-note">💬 בכל טעינה, לשלוח צילום מסך וכינוי.</div>
      <div class="tiny-note"><b>יחס צ׳יפים 1:10</b></div>
    </div>

    <div class="section">
      <h2>💸 משיכות</h2>
      <div>כל יום שלישי בין <b>18:00</b> ל-<b>00:00</b></div>
      <a href="https://chat.whatsapp.com/GDw1GilqCab6Un2TspiWBP?mode=wwc" target="_blank" id="withdrawGroupLink">
        💬 לקבוצת ה-WhatsApp לביצוע משיכות לחצו כאן
      </a>
      <div class="micro-note">* ניתן לבצע משיכה רק בימי שלישי בין 18:00 ל-00:00.</div>
    </div>

    <footer>
      ⚠️ שחקו באחריות
      <div class="footer-sub">🤝 שמרו על הקהילה שלנו – לא מפרסמים קלאבים או משחקים אחרים.</div>
      <div class="footer-sub">אנחנו כאן כדי ליהנות יחד, באווירה טובה ומשפחה אחת</div>
    </footer>
  </div>

  <!-- מודל טעינה -->
  <div id="amountModal" class="modal">
    <div class="modal-box">
      <h3>💰 פרטי טעינה</h3>
      <p>נא להזין סכום טעינה וכינוי באפליקציה:</p>
      <input type="number" id="amountInput" class="input" placeholder="כמה לטעון?" />
      <input type="text" id="nicknameInput" class="input" placeholder="מה הכינוי שלך?" />
      <div class="modal-actions">
        <button class="btn" onclick="confirmAmount()">שלח</button>
        <button class="btn" style="background:#555" onclick="closeAmountModal()">ביטול</button>
      </div>
    </div>
  </div>

  <!-- מודל משיכות מחוץ לזמן -->
  <div id="withdrawModal" class="modal">
    <div class="modal-box">
      <h3>🕓 לא כרגע</h3>
      <p>המשיכות מתבצעות רק ביום שלישי בין 18:00–00:00.<br>המועד הקרוב: <span id="nextWithdrawDate"></span> בין 18:00–00:00.</p>
      <div class="modal-actions">
        <button class="btn" onclick="closeWithdrawModal()">הבנתי</button>
      </div>
    </div>
  </div>

<script>
  const PHONES = { "מאור": "972546819166" };

  const amountModal = document.getElementById('amountModal');
  const amountInput = document.getElementById('amountInput');
  const nicknameInput = document.getElementById('nicknameInput');
  let pendingPhone = null;

  const withdrawLink = document.getElementById('withdrawGroupLink');
  const withdrawModal = document.getElementById('withdrawModal');
  const nextDateSpan = document.getElementById('nextWithdrawDate');

  function nowIL(){
    const d = new Date();
    const f = new Intl.DateTimeFormat("he-IL",{timeZone:"Asia/Jerusalem",hour:"2-digit",minute:"2-digit",weekday:"short"}).formatToParts(d);
    const get=t=>f.find(x=>x.type===t)?.value;
    const wd = get("weekday");
    const h = +get("hour"), m = +get("minute");
    const map={"יום א׳":0,"יום ב׳":1,"יום ג׳":2,"יום ד׳":3,"יום ה׳":4,"יום ו׳":5,"יום ש׳":6,"יום שבת":6};
    return {day:map[wd]??d.getDay(), minutes:h*60+m};
  }

  function isWithdrawWindowOpen(){
    const n = nowIL();
    return n.day === 2 && n.minutes >= 18*60 && n.minutes < 24*60;
  }

  function nextWithdrawDateString(){
    const n = nowIL(); const now = new Date();
    const TUE=2, start=18*60;
    let addDays;
    if(n.day===TUE && n.minutes<start) addDays=0;
    else { addDays=(TUE-n.day+7)%7; if(addDays===0) addDays=7; }
    const target=new Date(now.getFullYear(), now.getMonth(), now.getDate()+addDays);
    return new Intl.DateTimeFormat('he-IL',{timeZone:'Asia/Jerusalem',day:'2-digit',month:'2-digit',year:'numeric'}).format(target);
  }

  withdrawLink.addEventListener('click', e=>{
    if(!isWithdrawWindowOpen()){
      e.preventDefault();
      nextDateSpan.textContent = nextWithdrawDateString();
      withdrawModal.style.display='flex';
    }
  });

  function closeWithdrawModal(){ withdrawModal.style.display='none'; }
  function closeAmountModal(){ amountModal.style.display='none'; }

  function copyText(t){ navigator.clipboard.writeText(t); alert("הועתק!"); }

  function startWhatsappFlow(){
    pendingPhone = PHONES["מאור"];
    amountModal.style.display = 'flex';
    setTimeout(()=>amountInput.focus(),50);
  }

  function confirmAmount(){
    const rawAmount = (amountInput.value || '').trim();
    const nick = (nicknameInput.value || '').trim();
    const amount = Math.floor(Number(rawAmount));

    if(!rawAmount || !Number.isFinite(amount) || amount <= 0){ amountInput.focus(); return; }
    if(nick.length < 2){ nicknameInput.focus(); return; }

    const msg = `היי! רוצה להטעין לסניף הדיגיטלי סכום של ${amount} ₪.\nהכינוי שלי באפליקציה: ${nick}`;
    window.open(`https://api.whatsapp.com/send?phone=${pendingPhone}&text=${encodeURIComponent(msg)}`, "_blank");
    amountInput.value = ""; nicknameInput.value = ""; closeAmountModal();
  }
</script>
</body>
</html>

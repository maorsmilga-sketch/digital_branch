<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>הסניף הדיגיטלי</title>
<style>
:root{
  --fg:#f7f7f2; --glass:rgba(0,0,0,.55); --glass-brd:rgba(255,255,255,.08);
  --accent:#22d3ee; --btn:#2b7bff;
}
body{
  font-family:'Heebo',system-ui;
  background:url('background.png') center/cover no-repeat fixed;
  color:var(--fg); margin:0; text-align:center;
}
.overlay{
  width:min(640px,94%); margin:110px auto 20px; padding:18px 14px 20px;
  background:var(--glass); border:1px solid var(--glass-brd);
  border-radius:18px; box-shadow:0 0 20px rgba(0,0,0,.4);
}
h1{ margin:6px 0 8px; font-size:1.95rem; line-height:1.1; }

.section{
  background:rgba(0,0,0,.53); border:1px solid var(--glass-brd);
  border-radius:12px; padding:12px; margin:12px auto 0; text-align:right;
}
a{ color:var(--accent); font-weight:600; text-decoration:underline; }

.club-code{ font-size:1.9rem; font-weight:800; }
.copy-btn{ background:var(--btn); color:#fff; border:none; border-radius:6px; padding:6px 10px; cursor:pointer; }
.copy-btn:hover{ background:#1b63e8; }

.store-links{ display:flex; justify-content:center; gap:10px; margin-top:6px; }
.store-links a{ background:rgba(255,255,255,.1); padding:4px 6px; border-radius:8px; transition:.2s; }
.store-links a:hover{ transform:scale(1.05); background:rgba(255,255,255,.18); }
.store-icon{ width:65px; opacity:.95; }

.tiny-note{ font-size:.86em; opacity:.92; margin-top:6px; text-align:center; }
footer{ margin-top:14px; font-weight:700; font-size:1.05rem; color:#ffdf91; }
.footer-sub{ font-weight:500; font-size:.83rem; color:#ffe9b6; margin-top:6px; }

.app-title{ display:flex; align-items:center; justify-content:flex-end; gap:8px; margin:0 0 8px 0; }
.app-title .title-text{ margin:0; font-size:1.3rem; color:var(--fg); line-height:1; }
.app-title .app-logo{ height:1.3em; width:auto; border-radius:6px; object-fit:contain; }

.club-row{ display:flex; align-items:center; justify-content:center; gap:10px; flex-wrap:wrap; margin-top:6px; }
.club-code-label{ font-weight:700; color:#e5e5e5; font-size:1rem; }
.club-code-badge{ font-size:2rem; font-weight:900; color:#222; background:linear-gradient(135deg,#f9f9f9,#cfcfcf); border-radius:10px; padding:6px 16px; box-shadow:0 3px 10px rgba(0,0,0,.25); letter-spacing:2px; }
.copy-btn{ height:36px; padding:0 12px; border-radius:10px; font-weight:700; }

.pay-actions{ display:flex; justify-content:center; align-items:stretch; gap:16px; flex-wrap:wrap; margin:10px 0 8px; }
.pay-btn{ position:relative; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:8px; width:160px; min-height:120px; padding:12px; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.15); border-radius:14px; box-shadow:0 2px 8px rgba(0,0,0,.25); cursor:pointer; color:#fff; text-decoration:none; transition:transform .16s ease, background .16s ease, box-shadow .16s ease; }
.pay-btn:hover{ transform:translateY(-1px); background:rgba(255,255,255,.14); box-shadow:0 6px 16px rgba(0,0,0,.28); }
.pay-logo{ height:64px; width:auto; border-radius:12px; display:block; filter:brightness(1.03) contrast(1.03); }
.pay-label{ font-size:.95rem; opacity:.95; font-weight:600; }
@media (max-width:420px){ .pay-logo{ height:56px; } .pay-btn{ width:140px; min-height:110px; } }

.shift-indicator{ position:fixed; top:12px; left:12px; z-index:9999; background:rgba(0,0,0,.55); border:1px solid rgba(255,255,255,.15); border-radius:12px; padding:6px; box-shadow:0 3px 10px rgba(0,0,0,.3); cursor:pointer; transition:transform .15s ease, background .15s ease; }
.shift-indicator:hover{ transform:scale(1.05); background:rgba(0,0,0,.65); }
.shift-indicator img{ width:42px; height:42px; border-radius:10px; display:block; }

.modal{ position:fixed; inset:0; z-index:9998; display:flex; align-items:center; justify-content:center; opacity:0; visibility:hidden; pointer-events:none; background:rgba(0,0,0,0); transition:opacity .25s ease, visibility .25s ease, background .25s ease; }
.modal.show{ opacity:1; visibility:visible; pointer-events:auto; background:rgba(0,0,0,.55); }
.modal-box{ background:rgba(1,59,51,.96); border:1px solid rgba(255,255,255,.15); width:min(420px,92%); color:#fff; text-align:right; padding:18px; border-radius:14px; box-shadow:0 10px 30px rgba(0,0,0,.35); }
.modal-box h3{ margin:0 0 12px; color:#ffdf91; font-size:1.2rem; }
.modal-actions{ margin-top:12px; display:flex; justify-content:flex-start; gap:8px; }
.btn{ border:none; border-radius:8px; padding:8px 14px; cursor:pointer; color:#fff; background:var(--btn); }
.btn:hover{ background:#1b63e8; }
.btn-ghost{ background:transparent; border:1px solid rgba(255,255,255,.3); }
.btn-ghost:hover{ background:rgba(255,255,255,.1); }

.field{ display:flex; flex-direction:column; gap:6px; margin:10px 0; }
.label{ font-size:.95rem; opacity:.95; }
.input{ background:rgba(255,255,255,.1); border:1px solid rgba(255,255,255,.25); color:#fff; border-radius:10px; padding:10px; font-size:1rem; outline:none; }
.input:focus{ border-color:var(--accent); box-shadow:0 0 0 3px rgba(34,211,238,.25); }
.select{ background:rgba(255,255,255,.1); border:1px solid rgba(255,255,255,.25); color:#fff; border-radius:10px; padding:10px; font-size:1rem; }
.hint{ font-size:.82rem; opacity:.9; }
.error{ font-size:.86rem; color:#ffd1d1; display:none; }
.error.show{ display:block; }
</style>
</head>
<body>

<!-- כפתור משמרת -->
<div class="shift-indicator" onclick="openShiftModal()" title="מי במשמרת עכשיו?">
  <img src="shift.png" alt="משמרת">
</div>

<!-- מודאל משמרת (מעודכן ללא פאנל אדמין) -->
<div id="shiftModal" class="modal" aria-hidden="true">
  <div class="modal-box">
    <h3>🕓 מי במשמרת עכשיו?</h3>
    <p id="shiftText">טוען...</p>
    <div class="modal-actions">
      <button class="btn" onclick="closeShiftModal()">הבנתי</button>
    </div>
  </div>
</div>

<!-- מודאל bit (עודכן עם הצגת טלפון והעתקה) -->
<div id="bitModal" class="modal" aria-hidden="true">
  <div class="modal-box">
    <h3>bit — תשלום למפעיל</h3>
    <p>הטלפון של מי שבמשמרת כרגע:</p>
    <p id="bitPhone" style="font-size:1.3rem;font-weight:bold;margin-bottom:10px;"></p>
    <button class="btn" onclick="copyBitPhone()">📋 העתק מספר טלפון</button>
    <div class="modal-actions" style="margin-top:15px;">
      <button class="btn" onclick="closeBitModal()">סגור</button>
    </div>
  </div>
</div>

<!-- מודאל PayBox (פשוט נפתח לתשלום לאחר אזהרה) -->
<div id="payboxModal" class="modal" aria-hidden="true">
  <div class="modal-box">
    <h3>PayBox — תשלום</h3>
    <p>לאחר התשלום ב PayBox יש לבצע צילום מסך של התשלום ולשלוח אותו בקבוצת הסניף הדיגיטלי בWhatsapp בצירוף הכינוי.</p>
    <div class="modal-actions">
      <button class="btn" onclick="goToPayBox()">המשך לתשלום</button>
      <button class="btn" onclick="closePayboxModal()">ביטול</button>
    </div>
  </div>
</div>

<!-- מודאל חדש למשיכות WhatsApp -->
<div id="withdrawWhatsAppModal" class="modal" aria-hidden="true">
  <div class="modal-box">
    <h3>שליחת בקשת משיכה</h3>
    <p>שלח בקבוצת המשיכות הסניף הדיגיטלי כינוי וסכום למשיכה.</p>
    <div class="modal-actions">
      <button class="btn" onclick="openWithdrawWhatsAppGroup()">פתח את קבוצת המשיכות</button>
      <button class="btn-ghost" onclick="closeWithdrawWhatsAppModal()">סגור</button>
    </div>
  </div>
</div>

<!-- מודאל משיכות -->
<div id="withdrawModal" class="modal" aria-hidden="true">
  <div class="modal-box">
    <h3>בקשת משיכה</h3>
    <form id="withdrawForm">
      <div class="field">
        <label class="label" for="wd_withdraw">כמה למשוך? (₪)</label>
        <input class="input" id="wd_withdraw" name="wd_withdraw" type="number" min="1" step="1" inputmode="numeric" placeholder="למשל: 200" required />
      </div>
      <div class="field">
        <label class="label" for="wd_keep">כמה להשאיר? (₪)</label>
        <input class="input" id="wd_keep" name="wd_keep" type="number" min="0" step="1" inputmode="numeric" placeholder="למשל: 0" required />
      </div>
      <div class="field">
        <label class="label" for="wd_nick">כינוי (שם באפליקציה)</label>
        <input class="input" id="wd_nick" name="wd_nick" placeholder="ClubGG name" autocomplete="off" required />
      </div>
      <div class="field">
        <label class="label" for="wd_pay">אופן תשלום</label>
        <select class="select" id="wd_pay" name="wd_pay">
          <option value="Bit">Bit</option>
          <option value="PayBox">PayBox</option>
        </select>
      </div>
      <div id="wd_error" class="error">בדוק שכל השדות מולאו כראוי.</div>

      <div class="hint">לאחר שליחה: נפתח קישור הקבוצה כרגיל, והטקסט יועתק — הדבק אותו בצ׳אט הקבוצה ושלח ✅</div>

      <div class="modal-actions">
        <button type="submit" class="btn">שליחה</button>
        <button type="button" class="btn-ghost" id="wd_close">ביטול</button>
      </div>
    </form>
  </div>
</div>

<!-- מודאל פידבק למשיכות -->
<div id="withdrawFeedbackModal" class="modal" aria-hidden="true">
  <div class="modal-box">
    <h3>כמעט סיימנו ✨</h3>
    <p id="withdrawFeedbackText">הטקסט הועתק ללוח. נפתח את הקבוצה, הדבק ושלח ✅</p>
    <div class="modal-actions">
      <button type="button" class="btn" id="wd_fb_open">פתח את קבוצת המשיכות</button>
      <button type="button" class="btn-ghost" id="wd_fb_close">סגור</button>
    </div>
  </div>
</div>

<!-- מודאל חסימת משיכות (כשהאופציה אינה זמינה) -->
<div id="withdrawBlockedModal" class="modal" aria-hidden="true">
  <div class="modal-box">
    <h3>משיכות אינן זמינות כעת ⛔</h3>
    <p>ניתן לבצע משיכות ביום שלישי בין 18:00 ל־00:00 בלבד.</p>
    <div class="modal-actions">
      <button type="button" class="btn" id="wd_blocked_close">סגור</button>
    </div>
  </div>
</div>

<div class="overlay">
  <h1>הסניף הדיגיטלי</h1>

  <div class="section">
    <h2>📱 אפליקציה</h2>
    <div class="club-row">
      <span class="club-code-label">קוד מועדון:</span>
      <span class="club-code-badge" id="clubCode">715965</span>
      <button class="copy-btn" onclick="copyText(document.getElementById('clubCode').textContent)">📋 העתק</button>
    </div>
    <div class="store-links">
      <a href="https://apps.apple.com/us/app/clubgg-poker/id1529839330" target="_blank"><img src="app store.png" class="store-icon" alt="App Store"></a>
      <a href="https://play.google.com/store/apps/details?id=com.nsus.clubgg" target="_blank"><img src="android.png" class="store-icon" alt="Google Play"></a>
    </div>
  </div>

  <div class="section topup-section">
    <h2>🔋 טעינות</h2>
    <div class="hint-top">לחץ על אחת האופציות לטעינה</div>
    <div class="tiny-note"><b>שימו ❤️ טעינות מתבצעות כל יום בין 18:00 ל־00:00</b></div>
    <div class="pay-actions">
      <a class="pay-btn" data-type="paybox" href="https://links.payboxapp.com/9kD9tKtOhWb" target="_blank" onclick="openPayboxModal(event)">
        <img src="PayBox.png" class="pay-logo" alt="PayBox"><span class="pay-label">PayBox</span>
      </a>
      <button class="pay-btn" data-type="bit" onclick="openBitModal()">
        <img src="Bit.png" class="pay-logo" alt="bit"><span class="pay-label">bit</span>
      </button>
    </div>
    <div class="tiny-note">בכל טעינה, לשלוח צילום מסך וכינוי.</div>
    <div class="tiny-note"><b>יחס צ׳יפים 1:10</b></div>
  </div>

  <div class="section">
    <h2>💸 משיכות</h2>
    <div class="hours-pill">כל יום שלישי בין <b>18:00</b> ל־<b>00:00</b></div>
    <a id="withdrawLink" href="https://chat.whatsapp.com/GDw1GilqCab6Un2TspiWBP?mode=wwc" target="_blank" class="link-btn">💬 לקבוצת ה-WhatsApp לביצוע משיכות</a>
  </div>

  <footer>
    ⚠️ שחקו באחריות
    <div class="footer-sub">🤝 שמרו על הקהילה שלנו – לא מפרסמים קלאבים או משחקים אחרים.</div>
    <div class="footer-sub">אנחנו כאן כדי ליהנות יחד, באווירה טובה </div>
  </footer>
</div>

<script>
function copyText(t){ navigator.clipboard?.writeText(t).catch(()=>{}); }

const PHONE_MAOR = "0546819166";
const PHONE_IDO  = "0559877777";

function nowIL(){
  const d = new Date();
  const fmt = new Intl.DateTimeFormat('he-IL',{timeZone:'Asia/Jerusalem', hour12:false, hour:'2-digit', minute:'2-digit', weekday:'long'}).formatToParts(d);
  const get=t=>fmt.find(x=>x.type===t)?.value;
  const h=+get('hour'), m=+get('minute');
  const wd=(get('weekday')||'').trim();
  const mapLong={"יום ראשון":0,"יום שני":1,"יום שלישי":2,"יום רביעי":3,"יום חמישי":4,"יום שישי":5,"שבת":6,"יום שבת":6};
  const day=(wd in mapLong)?mapLong[wd]:d.getDay();
  return {day, minutes:h*60+m};
}
const STARTER_FOR_EVEN_DAY = 'מאור';
const STARTER_FOR_ODD_DAY  = 'עידו';
function currentShiftOwner(){
  const n = nowIL();
  const shiftIndex = Math.floor(n.minutes/180);
  const dayStarter = (n.day%2===0)?STARTER_FOR_EVEN_DAY:STARTER_FOR_ODD_DAY;
  const other = (dayStarter==='מאור')?'עידו':'מאור';
  return (shiftIndex%2===0)?dayStarter:other;
}

function openShiftModal(){
  const name = currentShiftOwner();
  document.getElementById('shiftText').textContent = `במשמרת: ${name}`;
  document.getElementById('shiftModal').classList.add('show');
}
function closeShiftModal(){ document.getElementById('shiftModal').classList.remove('show'); }

function openBitModal(){
  const name = currentShiftOwner();
  const phone = (name==='מאור') ? PHONE_MAOR : PHONE_IDO;
  document.getElementById('bitPhone').textContent = phone;
  document.getElementById('bitModal').classList.add('show');
}
function closeBitModal(){ document.getElementById('bitModal').classList.remove('show'); }
function copyBitPhone(){
  const phone = document.getElementById('bitPhone').textContent;
  navigator.clipboard.writeText(phone).then(() => {
    alert('המספר טלפון להעברה הועתק, יש לבצע העברה בBit על ידי "העברה לפי מספר נייד" להדביק את הטלפון, לצלם מסך ולשלוח בWhatsapp של הסניף הדיגיטלי בצירוף הכינוי.');
  });
}

function openPayboxModal(event){
  event.preventDefault();
  document.getElementById('payboxModal').classList.add('show');
}
function closePayboxModal(){
  document.getElementById('payboxModal').classList.remove('show');
}
function goToPayBox(){
  alert('לאחר התשלום ב PayBox יש לבצע צילום מסך של התשלום ולשלוח אותו בקבוצת הסניף הדיגיטלי בWhatsapp בצירוף הכינוי.');
  window.open('https://links.payboxapp.com/9kD9tKtOhWb','_blank');
  closePayboxModal();
}

// מודאל משיכות WhatsApp
const withdrawLink = document.getElementById('withdrawLink');
const withdrawWhatsAppModal = document.getElementById('withdrawWhatsAppModal');
function openWithdrawWhatsAppModal(event){
  event.preventDefault();
  withdrawWhatsAppModal.classList.add('show');
}
function closeWithdrawWhatsAppModal(){
  withdrawWhatsAppModal.classList.remove('show');
}
function openWithdrawWhatsAppGroup(){
  window.open(withdrawLink.href, '_blank');
  closeWithdrawWhatsAppModal();
}
withdrawLink.addEventListener('click', openWithdrawWhatsAppModal);

/* שאר הקוד המקורי של מודאלים, משיכות ולוגיקה נשאר ללא שינוי */
</script>

</body>
</html>